{% extends 'layout.html' %}

{% block content %}
    <section class="border rounded-md border-gray-200 p-5 dark:border-gray-800 text-gray-600 dark:text-gray-100 text-sm">
        <h2 class="text-lg font-semibold uppercase">Solución Numérica de Ecuaciones No Lineales</h2>
        <form method="POST" action="{{ url_for('main_routes.nonlinear_equations') }}">
            <div class="grid grid-cols-[3fr_repeat(5,_1fr)] gap-2 w-full mt-3 mb-1">
                <input type="text" name="equation" id="equation" placeholder="Ingrese la ecuación" class="inline-block py-1 px-2 items-center shadow border border-gray-200 dark:border-gray-800 rounded-md focus:outline-none dark:bg-black dark:border-gray-800 text-gray-700 dark:text-gray-400">
                <input type="number" name="a" id="a" placeholder="Ingrese A:" class="inline-block py-1 px-2 shadow border border-gray-200 dark:border-gray-800 rounded-md focus:outline-none dark:bg-black dark:border-gray-800 text-gray-700 dark:text-gray-400">
                <input type="number" name="b" id="b" placeholder="Ingrese B:" class="inline-block py-1 px-2 shadow border border-gray-200 dark:border-gray-800 rounded-md focus:outline-none dark:bg-black dark:border-gray-800 text-gray-700 dark:text-gray-400">
                <input type="text" name="tol" id="tol" placeholder="Ingrese TOL:" class="inline-block py-1 px-2 shadow border border-gray-200 dark:border-gray-800 rounded-md focus:outline-none dark:bg-black dark:border-gray-800 text-gray-700 dark:text-gray-400">
                <select name="method" class="py-1 px-2 shadow border border-gray-200 dark:border-gray-800 rounded-md focus:outline-none dark:bg-transparent dark:border-gray-800 text-gray-700 dark:text-gray-400">
                    <option selected value="0">Seleccionar</option>
                    <option value="1">Bisección</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                  </select>
                <button class="inline-flex text-center items-center justify-center py-1 rounded-md shadow text-gray-700 dark:text-gray-400 dark:border-gray-800 border border-gray-200 leading-none">Calcular</button>
            </div>
        </form>
        <small class="text-gray-400 dark:text-gray-600">Ex: x ** 3 - 2 * x ** 2 + 4 * x - 8 </small>
    </section>
    <section class="border rounded-md border-gray-200 p-5 dark:border-gray-800 text-gray-600 dark:text-gray-100 text-sm mt-3 grid gap-2 grid-cols-[0.5fr_1fr]">
        <div class="bg-stone-950 p-3">
            <h4 class="text-sm font-semibold uppercase text-center mb-2">Solución</h4>
            {% if result %}
            <p>Función: {{result.func_str}}</p>
            <p>Aproximación de la raíz: {{result.y_root}}</p>
            <p>Nro repeticiones: {{result.iter_count}}</p>
            {% endif %}
        </div>
        <div class="border rounded border-gray-200 dark:border-gray-800 p-3">
            <h4 class="text-sm font-semibold uppercase text-center mb-2">Gráfica</h4>
            {% if result %}
            <img src="data:image/png;base64,{{ result.plot_data }}" alt="Graph of function" class="text-center mx-auto">
            {% endif %}
        </div>
    </section>
{% endblock %}
